-- ------------------
-- 用户系统数据库表结构
-- $Id$

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Function structure for RAND_STR
-- ----------------------------
DROP FUNCTION IF EXISTS `RAND_STR`;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `RAND_STR`(`n` int) RETURNS varchar(255) CHARSET utf8
  BEGIN
    DECLARE chars_str varchar(100) DEFAULT 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    DECLARE return_str varchar(255) DEFAULT '';
    DECLARE i INT DEFAULT 0;
    WHILE i < n DO
      SET return_str = concat(return_str,substring(chars_str , FLOOR(1 + RAND()*62 ),1));
      SET i = i +1;
    END WHILE;
    RETURN return_str;
  END
;;
DELIMITER ;

-- ----------------------------
-- Table structure for USER_ACCOUNT
-- ----------------------------
DROP TABLE IF EXISTS `USER_ACCOUNT`;
CREATE TABLE `USER_ACCOUNT` (
  `USER_ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `USER_NAME` varchar(50) NOT NULL COMMENT '用户名',
  `HASHED_KEY` varchar(40) DEFAULT NULL COMMENT '用户名的hash',
  `AVATAR` varchar(255) DEFAULT NULL COMMENT '头像图片',
  `MOBILE_NO` varchar(20) DEFAULT NULL COMMENT '手机号码',
  `OLD_HASHED_PASSWD` varchar(50) DEFAULT NULL COMMENT '旧版本的hashed passwd',
  `HASHED_PASSWD` varchar(50) DEFAULT NULL COMMENT '新版本的hashed passwd',
  `HASHED_SALT` varchar(20) DEFAULT NULL COMMENT 'hashed passwd salt',
  `PASSWD_QUESTION` varchar(100) DEFAULT NULL COMMENT '安全问题',
  `PASSWD_ANSWER` varchar(50) DEFAULT NULL COMMENT '安全问题答案(hashed)',
  `ANSWER_SALT` varchar(20) DEFAULT NULL COMMENT 'PASSWD_ANSWER 的盐',
  `STATUS` tinyint(1) DEFAULT '0' COMMENT '帐号状态(0未激活 1正常 2锁定)',
  `IS_DELETED` tinyint(1) DEFAULT '0' COMMENT '帐号是否已被(逻辑)删除 {0|1}',
  `LAST_MODIFIED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后更新日期时间',
  `CREATED_DATE` datetime DEFAULT NULL COMMENT '记录创建日期时间(不可变更)',
  PRIMARY KEY (`USER_ID`),
  UNIQUE KEY `IDX_UA_USER_NAME` (`USER_NAME`),
  KEY `IDX_UA_MOBILE_NO` (`MOBILE_NO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ----------------------------
-- Table structure for USER_PROFILE
-- ----------------------------
DROP TABLE IF EXISTS `USER_PROFILE`;
CREATE TABLE `USER_PROFILE` (
  `USER_ID` bigint(20) NOT NULL COMMENT '用户Id（由USER_ACCOUNT生成）',
  `USER_NAME` varchar(50) NOT NULL COMMENT '用户名（冗余account）',
  `HASHED_KEY` varchar(40) NOT NULL COMMENT '用户名的hash',
  `ENGLISH_NAME` varchar(50) DEFAULT NULL COMMENT ' 英文名字',
  `FORMER_NAME` varchar(20) DEFAULT NULL COMMENT '曾用名',
  `MOBILE_NO` varchar(20) DEFAULT NULL COMMENT '手机号码（需要验证）',
  `MOBILE_NO2` varchar(20) DEFAULT NULL COMMENT '第二个手机号码（不需要验证）',
  `MOBILE_VERIFIED` tinyint(1) DEFAULT '0' COMMENT '手机号码是否已验证 {1|0}',
  `EMAIL` varchar(50) DEFAULT NULL COMMENT '电子邮箱地址',
  `EMAIL_VERIFIED` tinyint(1) DEFAULT '0' COMMENT '电子邮箱是否已验证',
  `ID_CARD` varchar(20) DEFAULT NULL COMMENT '身份证号码',
  `REAL_NAME` varchar(20) DEFAULT NULL COMMENT '真实姓名',
  `GENDER` varchar(2) DEFAULT 'N' COMMENT '性别 {F：女，M：男，N：未填写}',
  `AGE` smallint(6) DEFAULT '0' COMMENT '年龄(与身份证相同)',
  `CENSUS_PROVINCE` varchar(20) DEFAULT NULL COMMENT '户籍省份',
  `CENSUS_CITY` varchar(30) DEFAULT NULL COMMENT '户籍城市',
  `CENSUS_ADDRESS` varchar(100) DEFAULT NULL COMMENT '户籍地址',
  `LIVE_PROVINCE` varchar(20) DEFAULT NULL COMMENT '居住地省份',
  `LIVE_CITY` varchar(30) DEFAULT NULL COMMENT '居住地城市',
  `LIVE_ADDRESS` varchar(100) DEFAULT NULL COMMENT '居住地地址',
  `LIVE_CONTACT` varchar(100) DEFAULT NULL COMMENT '居住地联系方式（座机或手号）',
  `QQ` varchar(20) DEFAULT NULL COMMENT 'QQ号码',
  `MARRIAGE` varchar(2) DEFAULT NULL COMMENT '婚姻状况（见DICT_COMMON）',
  `EDUCATION` varchar(2) DEFAULT NULL COMMENT '教育情况（见DICT_COMMON）',
  `POSITION` varchar(4) DEFAULT NULL COMMENT '职位（见DICT_COMMON）',
  `SKILL_CERT` VARCHAR(2) DEFAULT NULL COMMENT '技能职称',
  `SOCIAL_SECURITY` varchar(1) DEFAULT 'N' COMMENT '是否有社保 {Y|N}',
  `PASSPORT` varchar(1) DEFAULT 'N' COMMENT '是否有护照 {Y|N}',
  `DRIVING` varchar(1) DEFAULT 'N' COMMENT '是否有驾照 {Y|N}',
  `USER_TYPE` varchar(20) DEFAULT NULL COMMENT '用户类型',
  `USER_TYPE_TIME` datetime DEFAULT NULL COMMENT '用户类型被修改的日期时间',
  `LAST_MODIFIED_DATE` datetime DEFAULT NULL COMMENT 'Profile最后修改日期时间',
  `CREATED_DATE` datetime NOT NULL COMMENT '记录创建日期时间',
  PRIMARY KEY (`USER_ID`),
  UNIQUE KEY `IDX_UP_USER_NAME` (`USER_NAME`),
  KEY `IDX_UP_MOBILE_NO` (`MOBILE_NO`),
  KEY `IDX_UP_EMAIL` (`EMAIL`),
  KEY `IDX_UP_REAL_NAME` (`REAL_NAME`),
  KEY `IDX_UP_ID_CARD` (`ID_CARD`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ----------------------------
-- Table structure for USER_SOCIAL
-- ----------------------------
DROP TABLE IF EXISTS `USER_SOCIAL`;
CREATE TABLE `USER_SOCIAL` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` bigint(20) NOT NULL COMMENT '用户id',
  `USER_NAME` varchar(50) NOT NULL COMMENT '用户名（冗余）',
  `OPEN_ID` varchar(50) DEFAULT NULL COMMENT '第三方平台OPEN_ID',
  `SOCIAL_SOURCE` varchar(20) DEFAULT NULL COMMENT '第三方社交平台来源枚举（见SocialSource）',
  `AUTH_TOKEN` varchar(50) DEFAULT NULL COMMENT '授权token',
  `TOKEN_PERIOD` bigint(20) DEFAULT '0' COMMENT 'token 的过期时间（秒）',
  `TOKEN_UPDATE_TIME` datetime DEFAULT NULL COMMENT 'token 更新时间',
  `LAST_MODIFIED_DATE` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改日期时间',
  `CREATED_DATE` datetime DEFAULT NULL COMMENT '记录创建日期时间',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `IDX_USER_ID_SOCIAL_SOURCE` (`USER_ID`,`SOCIAL_SOURCE`)
) ENGINE=InnoDB AUTO_INCREMENT=16391 DEFAULT CHARSET=utf8;


-- ----------------------------
-- Table structure for USER_LOGIN_HISTORY
-- ----------------------------
DROP TABLE IF EXISTS `USER_LOGIN_HISTORY`;
CREATE TABLE `USER_LOGIN_HISTORY` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` bigint(20) NOT NULL COMMENT '用户Id',
  `USER_NAME` varchar(50) NOT NULL COMMENT '用户名（冗余）',
  `DEVICE` varchar(20) DEFAULT 'BROWSER' COMMENT '用户登录的设备枚举（见UserDevice），默认值：BROWSER（浏览器）',
  `LOGIN_FIELD` varchar(50) DEFAULT NULL COMMENT '登录属性（目前仅用户名或手机号）',
  `LAST_USER_AGENT` varchar(255) DEFAULT NULL COMMENT '最后一次登录的User-Agent信息',
  `LAST_LOGIN_TIME` datetime DEFAULT NULL COMMENT '用户最后一次登录日期',
  `LAST_LOGIN_IP` varchar(20) DEFAULT NULL COMMENT '最后一次登录Ip(IPv4 or IPv6)',
  `LAST_TOKEN` varchar(50) DEFAULT NULL COMMENT '最后一次登录的token (如果是设备是浏览器，该值为sessionId)',
  `PREV_USER_AGENT` varchar(255) DEFAULT NULL COMMENT '前一次登录的User-Agent信息',
  `PREV_LOGIN_TIME` datetime DEFAULT NULL COMMENT '用户前一次登录日期',
  `PREV_LOGIN_IP` varchar(20) DEFAULT NULL COMMENT '前一次登录Ip(IPv4 or IPv6)',
  `PREV_TOKEN` varchar(50) DEFAULT NULL COMMENT '前一次登录的token (如果是设备是浏览器，该值为sessionId)',
  `LOGIN_COUNT` int(11) DEFAULT '0' COMMENT '登录次数',
  `LAST_MODIFIED_DATE` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '记录最后更新日期时间',
  `CREATED_DATE` datetime NOT NULL COMMENT '记录创建日期时间',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `IDX_USER_ID_DEVICE` (`USER_ID`,`DEVICE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ----------------------------
-- Table structure for USER_EDUCATION
-- USER_EDUCATION表的数据必须写程序完成，涉及members_field_details的education_info
-- ----------------------------
DROP TABLE IF EXISTS `USER_EDUCATION`;
CREATE TABLE `USER_EDUCATION` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` BIGINT(20) NOT NULL COMMENT '用户ID',
  `USER_NAME` VARCHAR(50) NOT NULL COMMENT '用户名(冗余)',
  `SCHOOL_NAME` VARCHAR(50) NOT NULL COMMENT '学校名称',
  `PROFESSION` VARCHAR(50) NULL DEFAULT NULL COMMENT '专业',
  `EDUCATION` VARCHAR(2) NOT NULL COMMENT '学历（见DICT_COMMON）',
  `START_YEAR` YEAR NOT NULL DEFAULT '0000' COMMENT '开始(入学)-年',
  `START_MONTH` INT(2) NOT NULL COMMENT '开始(入学)-月',
  `END_YEAR` YEAR NOT NULL DEFAULT '0000' COMMENT '截止(毕业)-年',
  `END_MONTH` INT(2) NOT NULL COMMENT '截止(毕业)-月',
  `REMARKS` VARCHAR(200) NULL DEFAULT NULL COMMENT '备注',
  `LAST_MODIFIED_DATE` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '记录最后更新日期时间',
  `CREATED_DATE` datetime NOT NULL COMMENT '记录创建日期时间',
  PRIMARY KEY (`ID`),
  INDEX `USER_ID` (`USER_ID`),
  INDEX `USER_NAME` (`USER_NAME`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Table structure for USER_AUTHC
-- ----------------------------
DROP TABLE IF EXISTS `USER_AUTHC`;
CREATE TABLE `USER_AUTHC` (
  `USER_ID` bigint(20) NOT NULL,
  `USER_NAME` varchar(50) NOT NULL COMMENT '用户名（冗余）',
  `EMAIL` varchar(50) DEFAULT NULL,
  `EMAIL_VERIFIED` tinyint(1) DEFAULT '0' COMMENT '是否通过验证 {1|0}',
  `MOBILE_NO` varchar(20) DEFAULT NULL COMMENT '手机号码',
  `MOBILE_VERIFIED` tinyint(1) DEFAULT '0' COMMENT '是否通过验证 {1|0}',
  `AVATAR` varchar(255) DEFAULT NULL COMMENT '真实照片地址',
  `AVATAR_STATUS` tinyint(1) DEFAULT '0' COMMENT '照片认证状态（见AvatarAuthcStatus）',
  `REAL_NAME` varchar(20) DEFAULT NULL COMMENT '真实姓名',
  `ID_CARD` varchar(20) DEFAULT NULL COMMENT '身份证号',
  `CARD_VERIFIED` tinyint(1) DEFAULT '0' COMMENT '身份证是否通过验证 {1|0}',
  `EDUCATION` varchar(2) DEFAULT NULL COMMENT '教育信息[学历]（见DICT_COMMON[education]）',
  `DIPLOMA` varchar(255) DEFAULT NULL COMMENT '毕业（学位）证书图片地址',
  `EDU_VALID_CODE` varchar(50) DEFAULT NULL COMMENT '毕业（学位）证书认证码',
  `EDU_CREATE_TIME` datetime DEFAULT NULL COMMENT '毕业（学位）证书提交验证的日期时间',
  `EDU_VERIFIED` tinyint(1) DEFAULT '0' COMMENT '学历是否已验证 {1|0}',
  `PROFESSION` varchar(50) DEFAULT NULL COMMENT '学历专业',
  `STU_NUMBER` varchar(20) DEFAULT NULL COMMENT '学号',
  `UNIV_LOCATION` varchar(20) DEFAULT NULL COMMENT '大学所在地（省市）',
  `UNIV_NAME` varchar(50) DEFAULT NULL COMMENT '大学名称',
  `CAMPUS` varchar(50) DEFAULT NULL COMMENT '校区',
  `ENTRANCE_YEAR` year(4) DEFAULT '0000' COMMENT '入学年份',
  `STU_VERIFIED` tinyint(1) DEFAULT '0' COMMENT '学籍是否通过认证{1|0}',
  `FACE_VERIFIED` tinyint(1) DEFAULT '0' COMMENT '脸纹是否通过认证 {1|0}',
  `LAST_MODIFIED_DATE` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '记录最后更新日期时间',
  `CREATED_DATE` datetime NOT NULL COMMENT '记录创建日期时间',
  PRIMARY KEY (`USER_ID`),
  KEY `IDX_UA_MOBILE_NO` (`MOBILE_NO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户认证信息表';

-- ----------------------------
-- Table structure for EMAIL_VERIFY_SOURCE
-- ----------------------------
DROP TABLE IF EXISTS `EMAIL_VERIFY_SOURCE`;
CREATE TABLE `EMAIL_VERIFY_SOURCE` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` bigint(20) NOT NULL COMMENT '用户Id',
  `TYPE` tinyint(1) NOT NULL COMMENT '业务类型',
  `TOKEN` varchar(50) NOT NULL COMMENT '验证字符串',
  `CONTENT` varchar(100) NOT NULL COMMENT '实际数据串',
  `DEADLINE` bigint(20) DEFAULT NULL COMMENT '有效(截止)时间(毫秒级)',
  `USE_TIMES` int(11) DEFAULT NULL COMMENT '使用次数',
  `STATUS` tinyint(1) DEFAULT '0' COMMENT '状态(-1无效 0未使用 1已使用)',
  `LAST_MODIFIED_DATE` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '记录最后更新日期时间',
  `CREATED_DATE` datetime NOT NULL COMMENT '记录创建日期时间',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `IDX_TOKEN` (`TOKEN`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ----------------------------
-- Table structure for SCORE_RANK
-- ----------------------------
DROP TABLE IF EXISTS `SCORE_RANK`;
CREATE TABLE `SCORE_RANK` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `RANK_NAME` varchar(20) NOT NULL COMMENT '积分等级名称',
  `RANK_ICON` varchar(200) NOT NULL COMMENT '积分等级图标',
  `START_SCORE` int(11) NOT NULL COMMENT '等级积分下限',
  `END_SCORE` int(11) NOT NULL COMMENT '等级积分上限',
  `SCORE_CAPITAL` varchar(500) DEFAULT NULL COMMENT '积分等级相关资本信息',
  `REMARKS` varchar(100) DEFAULT NULL COMMENT '备注',
  `LAST_MODIFIED_DATE` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '记录最后更新日期时间',
  `CREATED_DATE` datetime NOT NULL COMMENT '记录创建日期时间',
  PRIMARY KEY (`ID`)
) COMMENT='积分等级配置信息' ENGINE=InnoDB DEFAULT CHARSET=utf8;



-- ----------------------------
-- Table structure for SCORE_ALLOC
-- ----------------------------
DROP TABLE IF EXISTS `SCORE_ALLOC`;
CREATE TABLE `SCORE_ALLOC` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `ALLOC_NAME` VARCHAR(50) NOT NULL COMMENT '积分配置名称',
  `ALLOC_TYPE` TINYINT(1) NOT NULL DEFAULT '1' COMMENT '积分配置分类',
  `KEYWORD` VARCHAR(50) NOT NULL COMMENT '关键值(对应属性名)',
  `ALLOC_DESC` VARCHAR(200) NULL DEFAULT NULL COMMENT '积分配置描述',
  `MIN_SCORE` INT(11) NOT NULL COMMENT '积分范围-下限值',
  `MAX_SCORE` INT(11) NOT NULL COMMENT '积分范围-上限值',
  `IS_ENABLED` TINYINT(1) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `REFUSE_REASON` VARCHAR(500) NULL DEFAULT NULL COMMENT '审核时的拒绝原因',
  `ORDER_NUM` INT(11) NOT NULL COMMENT '排序值',
  `IS_AUTO_ASSIGN` TINYINT(1) NOT NULL COMMENT '是否自动分配',
  `LAST_MODIFIED_DATE` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`ID`),
  INDEX `ALLOC_TYPE` (`ALLOC_TYPE`),
  UNIQUE INDEX `KEYWORD` (`KEYWORD`)
) COMMENT='积分类型' ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ----------------------------
-- Table structure for USER_FIELD
-- ----------------------------
DROP TABLE IF EXISTS `USER_FIELD`;
CREATE TABLE `USER_FIELD` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `SCORE_ALLOC_ID` BIGINT(20) DEFAULT NULL COMMENT '积分类型ID',
  `FIELD_NAME` VARCHAR(50) NOT NULL COMMENT '属性名',
  `FIELD_KWD` VARCHAR(50) NOT NULL COMMENT '属性关键字',
  `IS_REQUIRED` TINYINT(1) NOT NULL DEFAULT '0' COMMENT '是否必填',
  `FIELD_MIN_LEN` INT(11) NOT NULL DEFAULT '0' COMMENT '属性最小长度',
  `FIELD_MAX_LEN` INT(11) NOT NULL DEFAULT '0' COMMENT '属性最大长度',
  `FIELD_NOTE` VARCHAR(250) NULL DEFAULT NULL COMMENT '属性旁注',
  `VERIFY_MODE` TINYINT(1) NOT NULL DEFAULT '0' COMMENT '验证方式(见VerifyMode枚举)',
  `IS_INTEGRITY` TINYINT(1) NOT NULL DEFAULT '0' COMMENT '是否属于信息完整性范畴',
  `FIELD_DESC` VARCHAR(200) NULL DEFAULT NULL COMMENT '属性描述',
  `LAST_MODIFIED_DATE` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
PRIMARY KEY (`ID`),
UNIQUE INDEX `FIELD_NAME_FIELD_KWD` (`FIELD_NAME`, `FIELD_KWD`),
INDEX `SCORE_ALLOC_ID` (`SCORE_ALLOC_ID`)
) COMMENT='用户属性配置表' ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ------------------------------------
-- Table structure for USER_SCORE_INCOME
-- ------------------------------------
DROP TABLE IF EXISTS `USER_SCORE_INCOME`;
CREATE TABLE `USER_SCORE_INCOME` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` BIGINT(20) NOT NULL COMMENT '用户ID',
  `SCORE_ALLOC_ID` BIGINT(20) NOT NULL COMMENT '积分类型ID(SCORE_TYPE)',
  `SCORE` INT(11) NOT NULL DEFAULT '0' COMMENT '获取积分',
  `AUDIT_SCORE` INT(11) NULL DEFAULT NULL COMMENT '审核建议积分',
  `AUDITOR_ID` INT(11) NULL DEFAULT NULL COMMENT '审核人ID',
  `AUDIT_TIME` TIMESTAMP NULL DEFAULT NULL COMMENT '审核时间',
  `IS_CONFIRM` TINYINT(1) NOT NULL DEFAULT '0' COMMENT '是否确定',
  `REMARKS` VARCHAR(100) NULL DEFAULT NULL COMMENT '备注',
  `LAST_MODIFIED_DATE` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`ID`),
  INDEX `USER_ID` (`USER_ID`),
  INDEX `SCORE_ALLOC_ID` (`SCORE_ALLOC_ID`)
) COMMENT='用户积分收入表' ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ------------------------------------
-- Table structure for USER_UPLOAD_TYPE
-- ------------------------------------
DROP TABLE IF EXISTS `USER_UPLOAD_TYPE`;
CREATE TABLE `USER_UPLOAD_TYPE` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `SCORE_ALLOC_ID` BIGINT(20) NOT NULL COMMENT '积分类型ID',
  `TYPE_NAME` VARCHAR(50) NOT NULL COMMENT '上传类型的名称',
  `UPLOAD_NOTE` VARCHAR(250) NULL DEFAULT NULL COMMENT '上传类型的标注',
  `UPLOAD_EXAMPLE` VARCHAR(100) NULL DEFAULT NULL COMMENT '上传类型的样本',
  `LAST_MODIFIED_DATE` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `TYPE_NAME` (`TYPE_NAME`),
  INDEX `SCORE_ALLOC_ID` (`SCORE_ALLOC_ID`)
) COMMENT='用户上传资料类型表' ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ------------------------------------
-- Table structure for USER_UPLOAD_ITEM
-- ------------------------------------
DROP TABLE IF EXISTS `USER_UPLOAD_ITEM`;
CREATE TABLE `USER_UPLOAD_ITEM` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `UPLOAD_ID` BIGINT(20) NOT NULL COMMENT '用户上传ID',
  `FILE_NAME` VARCHAR(100) NOT NULL COMMENT '文件名',
  `FILE_TYPE` VARCHAR(50) NOT NULL COMMENT '文件类型',
  `FILE_URL` VARCHAR(100) NOT NULL COMMENT '文件URL',
  `FILE_SIZE` INT(11) NOT NULL DEFAULT '0' COMMENT '文件大小',
  `FILE_DESC` VARCHAR(200) NULL DEFAULT NULL COMMENT '文件描述',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`ID`),
  INDEX `UPLOAD_ID` (`UPLOAD_ID`)
) COMMENT='用户上传详细信息' ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ------------------------------------
-- Table structure for USER_UPLOAD
-- ------------------------------------
DROP TABLE IF EXISTS `USER_UPLOAD`;
CREATE TABLE `USER_UPLOAD` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` BIGINT(20) NOT NULL COMMENT '用户ID',
  `UPLOAD_TYPE_ID` BIGINT(20) NOT NULL COMMENT '上传类型ID',
  `UPLOAD_TITLE` VARCHAR(50) NULL DEFAULT NULL COMMENT '上传标题',
  `UPLOAD_CONTENT` VARCHAR(500) NULL DEFAULT NULL COMMENT '上传内容',
  `AUDIT_STATUS` TINYINT(2) NOT NULL COMMENT '审核状态(见枚举UploadAuditStatus)',
  `AUDIT_TIME` TIMESTAMP NULL DEFAULT NULL COMMENT '审核时间',
  `OPERATOR_ID` BIGINT(20) NULL DEFAULT NULL COMMENT '审核人ID',
  `OPERATOR_NAME` VARCHAR(50) NULL DEFAULT NULL COMMENT '审核人名称',
  `ASSIGNER_ID` BIGINT(20) NULL DEFAULT NULL COMMENT '分配人ID',
  `ASSIGNER_NAME` VARCHAR(50) NULL DEFAULT NULL COMMENT '分配人名称',
  `ASSIGN_TIME` TIMESTAMP NULL DEFAULT NULL COMMENT '分配时间',
  `REMARKS` VARCHAR(500) NULL DEFAULT NULL COMMENT '备注',
  `LAST_MODIFIED_DATE` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`ID`),
  INDEX `USER_ID` (`USER_ID`),
  INDEX `UPLOAD_TYPE_ID` (`UPLOAD_TYPE_ID`),
  INDEX `AUDIT_STATUS` (`AUDIT_STATUS`)
) COMMENT='用户上传表' ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- -----------------------------------
-- Table structure for USER_ID5_RECORD
-- -----------------------------------
DROP TABLE IF EXISTS `USER_ID5_RECORD`;
CREATE TABLE `USER_ID5_RECORD` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` BIGINT(20) NOT NULL COMMENT '用户ID',
  `REAL_NAME` VARCHAR(50) NOT NULL COMMENT '真实姓名',
  `ID_CARD` VARCHAR(20) NOT NULL COMMENT '身份证号码',
  `SCHOOL_NAME` VARCHAR(50) NULL DEFAULT NULL COMMENT '学校名称',
  `EDUCATION` VARCHAR(20) NULL DEFAULT NULL COMMENT '学历',
  `ENTRANCE_TIME` VARCHAR(20) NULL DEFAULT NULL COMMENT '入学时间',
  `PROFESSION` VARCHAR(50) NULL DEFAULT NULL COMMENT '专业',
  `GRADUATION` VARCHAR(20) NULL DEFAULT NULL COMMENT '毕业时间',
  `STUDY_RESULT` VARCHAR(20) NULL DEFAULT NULL COMMENT '学习结果',
  `STUDY_CHANNEL` VARCHAR(20) NULL DEFAULT NULL COMMENT '学习方式',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`ID`),
  INDEX `USER_ID` (`USER_ID`)
) COMMENT='国政通(第三方)查询记录表' ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- -----------------------------------
-- Table structure for USER_LOAN_INFO
-- -----------------------------------
DROP TABLE IF EXISTS `USER_LOAN_INFO`;
CREATE TABLE `USER_LOAN_INFO` (
  `USER_ID` BIGINT(20) NOT NULL COMMENT '用户ID(由UserAccount生成)',
  `USER_NAME` VARCHAR(50) NULL DEFAULT NULL COMMENT '用户名',
  `WORK_DATUM` VARCHAR(1500) NULL DEFAULT NULL COMMENT '工作单位信息',
  `RELATIVE` VARCHAR(200) NULL DEFAULT NULL COMMENT '亲属信息',
  `WORKMATE` VARCHAR(100) NULL DEFAULT NULL COMMENT '同事信息',
  `MONTH_INCOME` DECIMAL(10,2) NULL DEFAULT NULL COMMENT '个人月收入',
  `MONTH_WAGE` DECIMAL(10,2) NULL DEFAULT NULL COMMENT '每月工资',
  `CREDIT_LINES` DECIMAL(10,2) NULL DEFAULT NULL COMMENT '单张信用卡最高额度',
  `ISSUING_BANK` VARCHAR(50) NULL DEFAULT NULL COMMENT '发卡银行',
  `ASSET_VALUE` INT(11) NULL DEFAULT NULL COMMENT '资产信息(由代表各资产的质数的乘积)',
  `ASSET_DESC` VARCHAR(100) NULL DEFAULT NULL COMMENT '资产(其他)说明',
  `LIABILITIES` VARCHAR(1500) NULL DEFAULT NULL COMMENT '债务详细信息',
  `LOAN_EXT` VARCHAR(1500) NULL DEFAULT NULL COMMENT '扩展',
  `LAST_MODIFIED_DATE` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`USER_ID`)
) COMMENT='用户借款相关信息表' ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- -----------------------------------
-- Table structure for USER_STATS
-- -----------------------------------
DROP TABLE IF EXISTS `USER_STATS`;
CREATE TABLE `USER_STATS` (
  `USER_ID` BIGINT(20) NOT NULL COMMENT '用户ID(由UserAccount生成)',
  `TOTAL_SCORE` INT(11) DEFAULT '0' COMMENT '总积分',
  `CURR_SCORE` INT(11) DEFAULT '0' COMMENT '当前剩余积分',
  `BORROW_COUNT` INT(11) DEFAULT '0' COMMENT '借款成功次数',
  `REJECTED_COUNT` INT(11) DEFAULT '0' COMMENT '流标次数',
  `BIDDING_COUNT` INT(11) DEFAULT '0' COMMENT '投标成功次数',
  `LAST_MODIFIED_DATE` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `CREATED_DATE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`USER_ID`)
) COMMENT='用户统计相关信息表' ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- ----------------------------
-- Table structure for USER_STUDENT
-- ----------------------------
DROP TABLE IF EXISTS `USER_STUDENT`;
CREATE TABLE `USER_STUDENT` (
  `USER_ID` bigint(20) NOT NULL,
  `COLLEGE_ID` int(11) DEFAULT NULL COMMENT '学校id（见DICT_COLLEGE）',
  `COLLEGE_NAME` varchar(50) DEFAULT NULL COMMENT '学校名称（系统没有信息的学校）',
  `CAMPUS` varchar(50) DEFAULT NULL COMMENT '校区',
  `MAJOR` varchar(50) DEFAULT NULL COMMENT '专业名称',
  `STUDENT_NO` varchar(20) DEFAULT NULL COMMENT '学号',
  `ATTN_YEAR` smallint(4) DEFAULT NULL COMMENT '入学年份',
  `EDU_CODE` varchar(2) DEFAULT NULL COMMENT '学历code（见DICT_COMMON[TYPE_KEY=education]）',
  PRIMARY KEY (`USER_ID`),
  KEY `IDX_US_COLLEGE_ID` (`COLLEGE_ID`),
  KEY `IDX_US_ATTN_YEAR` (`ATTN_YEAR`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;