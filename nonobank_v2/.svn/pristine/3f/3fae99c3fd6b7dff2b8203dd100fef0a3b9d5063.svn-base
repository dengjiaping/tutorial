<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2009-2014. 上海诺诺镑客 All rights reserved.
  ~ @(#) app-config.xml 2014-10-27 16:42
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="themeSource" class="org.springframework.ui.context.support.ResourceBundleThemeSource">
        <property name="basenamePrefix" value="theme." />
    </bean>

    <bean id="themeResolver" class="org.springframework.web.servlet.theme.FixedThemeResolver">
        <property name="defaultThemeName" value="${app.themeName}" />
    </bean>

    <bean id="webAppConfigure" factory-method="getConfigure"
          class="com.nonobank.web.config.support.DefaultWebAppConfigure">
        <property name="mainDomain" value="${app.mainDomain}" />
        <property name="staticDomain" value="${app.staticDomain}" />
        <property name="httpPort" value="${app.http.port}" />
        <property name="httpsPort" value="${app.https.port}" />
        <property name="theme">
            <bean factory-bean="themeSource" factory-method="getTheme">
                <constructor-arg value="${app.themeName}"/>
            </bean>
        </property>
        <property name="forcedSSLLogin" value="${app.forcingSSLLogin}" />
        <property name="stylesPath" value="${app.stylesContextPath}" />
        <property name="scriptsPath" value="${app.scriptsContextPath}" />
        <property name="imagesPath" value="${app.imagesContextPath}" />
        <property name="devMode" value="${app.devMode}" />
    </bean>

    <bean id="messageSource" class="com.nonobank.spring.i18n.CustomResourceBundleMessageResource">
        <property name="cacheSeconds" value="3600" />
        <property name="basenames">
            <list>
                <value>META-INF/i18n/user</value>
                <value>META-INF/i18n/user_v</value>
            </list>
        </property>
        <property name="defaultEncoding" value="UTF-8" />
    </bean>
</beans>